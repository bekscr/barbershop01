<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Barbershop 01 ‚Äî –û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å</title>
<style>
  :root{
    --bg:#f6f7f8;--card:#fff;--text:#1f2328;--muted:#6a6f75;
    --border:#e6e7e9;--chip:#eef0f3;--black:#111;--radius:14px;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--text);
    font-family:-apple-system,BlinkMacSystemFont,Inter,Roboto,Arial}
  .wrap{max-width:720px;margin:0 auto;min-height:100dvh;background:var(--bg)}
  /* Top bar */
  .top{position:sticky;top:0;z-index:20;background:var(--card);
    border-bottom:1px solid var(--border);padding:10px 14px}
  .row{display:flex;align-items:center;gap:10px}
  .back{font-size:22px;border:0;background:transparent;padding:6px 8px}
  .brand{display:flex;align-items:center;gap:10px}
  .logo{width:34px;height:34px;border-radius:50%;
    background:#000;color:#fff;display:grid;place-items:center;font-weight:800}
  .title{font-weight:800}
  .sub{color:var(--muted);font-size:12px;line-height:1.2}
  /* Sections / cards */
  .section{padding:14px}
  .list{display:flex;flex-direction:column;gap:10px}
  .item{display:flex;align-items:center;justify-content:space-between;
    padding:14px;border-radius:12px;border:1px solid var(--border);background:#fff}
  .left{display:flex;align-items:center;gap:12px}
  .ic{width:34px;height:34px;border-radius:10px;background:var(--chip);
    display:grid;place-items:center}
  .rarr{color:var(--muted)}
  /* Services */
  .svc{display:flex;align-items:center;justify-content:space-between;
    padding:14px;border:1px solid var(--border);border-radius:12px;background:#fff}
  .svc .meta{color:var(--muted);font-size:12px;margin-top:4px}
  .check{appearance:none;width:22px;height:22px;border:2px solid #c7c9cc;border-radius:6px;display:inline-grid;place-items:center}
  .check:checked{background:#111;border-color:#111}
  .check:checked::after{content:"‚úì";color:#fff;font-size:14px}
  /* Masters */
  .master{display:flex;gap:12px;padding:14px;border:1px solid var(--border);border-radius:12px;background:#fff}
  .ava{width:46px;height:46px;border-radius:50%;background:linear-gradient(#eee,#ddd);display:grid;place-items:center;font-weight:700}
  .mname{font-weight:700}
  .mmeta{color:var(--muted);font-size:12px}
  .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
  .chip{padding:8px 10px;border-radius:999px;background:var(--chip);border:1px solid var(--border);cursor:pointer}
  .chip.sel{background:#111;color:#fff;border-color:#111}
  .radio{width:20px;height:20px;border-radius:50%;border:2px solid #bbb;display:inline-grid;place-items:center}
  .radio span{width:10px;height:10px;border-radius:50%;background:#111;transform:scale(0);transition:.15s}
  .radio.act span{transform:scale(1)}
  /* Calendar */
  .cal{background:#fff;border:1px solid var(--border);border-radius:12px;overflow:hidden}
  .cal-top{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid var(--border)}
  .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;padding:10px}
  .dow,.d{height:40px;display:grid;place-items:center;border-radius:10px}
  .dow{font-size:12px;color:var(--muted)}
  .d{background:#fff;border:1px solid var(--border);cursor:pointer}
  .d.off{opacity:.35}
  .d.sel{background:#111;color:#fff;border-color:#111}
  .slots{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
  /* Checkout */
  .f{display:grid;gap:10px}
  .inp{width:100%;padding:12px;border:1px solid var(--border);border-radius:10px;font-size:16px}
  .hint{font-size:12px;color:var(--muted)}
  /* CTA */
  .cta{position:sticky;bottom:0;background:rgba(255,255,255,.92);
    backdrop-filter:blur(8px);border-top:1px solid var(--border);padding:12px 14px}
  .btn{width:100%;padding:14px;border-radius:12px;border:0;background:#111;color:#fff;font-weight:800;font-size:16px}
  .muted{color:var(--muted)}
  [hidden]{display:none!important}
</style>
</head>
<body>
<div class="wrap">

  <!-- Top -->
  <div class="top">
    <div class="row">
      <button class="back" id="backBtn" onclick="goBack()" hidden>‚Äπ</button>
      <div class="brand">
        <div class="logo">01</div>
        <div>
          <div class="title">Barbershop 01</div>
          <div class="sub">–ë–∏—à–∫–µ–∫, —É–ª. –£–º–µ—Ç–∞–ª–∏–µ–≤–∞ 89 ‚Ä¢ 11:00‚Äì21:00</div>
        </div>
      </div>
    </div>
  </div>

  <!-- HOME -->
  <div id="screen-home" class="section">
    <div class="list">
      <button class="item" onclick="show('screen-services')">
        <div class="left"><div class="ic">üìã</div><div><div class="title">–í—ã–±—Ä–∞—Ç—å —É—Å–ª—É–≥–∏</div><div class="sub">–¶–µ–Ω—ã –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div></div></div><div class="rarr">‚Ä∫</div>
      </button>
      <button class="item" onclick="show('screen-masters')">
        <div class="left"><div class="ic">üë§</div><div><div class="title">–í—ã–±—Ä–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞</div><div class="sub">–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–µ —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã</div></div></div><div class="rarr">‚Ä∫</div>
      </button>
      <button class="item" onclick="show('screen-calendar')">
        <div class="left"><div class="ic">üóìÔ∏è</div><div><div class="title">–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è</div><div class="sub">–°–≤–æ–±–æ–¥–Ω—ã–µ –æ–∫–Ω–∞ –ø–æ –¥–Ω—è–º</div></div></div><div class="rarr">‚Ä∫</div>
      </button>
      <button class="item" onclick="show('screen-checkout')">
        <div class="left"><div class="ic">‚úÖ</div><div><div class="title">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—é</div><div class="sub">–ò–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏</div></div></div><div class="rarr">‚Ä∫</div>
      </button>
    </div>
  </div>

  <!-- SERVICES -->
  <div id="screen-services" class="section" hidden>
    <div class="list" id="svcList"></div>
  </div>

  <!-- MASTERS -->
  <div id="screen-masters" class="section" hidden>
    <div class="list" id="mastersList"></div>
  </div>

  <!-- CALENDAR -->
  <div id="screen-calendar" class="section" hidden>
    <div class="cal">
      <div class="cal-top">
        <button onclick="shiftMonth(-1)">‚Äπ</button>
        <div id="monthLabel" style="font-weight:800"></div>
        <button onclick="shiftMonth(1)">‚Ä∫</button>
      </div>
      <div class="cal-grid" id="calHead"></div>
      <div class="cal-grid" id="calGrid"></div>
    </div>
    <div class="item" style="margin-top:12px;flex-direction:column;align-items:flex-start">
      <div class="sub">–°–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è</div>
      <div class="slots" id="daySlots"></div>
    </div>
  </div>

  <!-- CHECKOUT -->
  <div id="screen-checkout" class="section" hidden>
    <div class="item" style="flex-direction:column;align-items:flex-start">
      <div style="font-weight:800">–í–∞—à –≤—ã–±–æ—Ä</div>
      <div id="summary" class="sub" style="margin-top:6px"></div>
    </div>
    <div class="item" style="margin-top:10px">
      <div class="f" style="width:100%">
        <input class="inp" id="name" placeholder="–í–∞—à–µ –∏–º—è">
        <input class="inp" id="phone" placeholder="+996 ___ ___ ___" inputmode="tel">
        <div class="hint">–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞—è–≤–∫–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ WhatsApp –Ω–∞ –Ω–æ–º–µ—Ä —Å–∞–ª–æ–Ω–∞.</div>
      </div>
    </div>
  </div>

  <!-- STICKY CTA -->
  <div class="cta">
    <button class="btn" onclick="primaryAction()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
  </div>
</div>

<script>
  /* ---------- –î–ê–ù–ù–´–ï ---------- */
  const masters = [
    {id:'m1', name:'–ö–∞–∞–±–∞–π', role:'–ú–∞—Å—Ç–µ—Ä —Å–æ —Å—Ç–∞–∂–µ–º', rating:4.9, next:['10:00','10:30','11:00','11:30','12:00']},
    {id:'m2', name:'–ê–∑–∞–º–∞—Ç', role:'–ú–∞—Å—Ç–µ—Ä —Å–æ —Å—Ç–∞–∂–µ–º', rating:4.7, next:['10:00','10:30','11:30','12:20']},
    {id:'m3', name:'–°—É–º–∞—è', role:'–ú–∞—Å—Ç–µ—Ä', rating:5.0, next:['18:00','18:30','19:00','19:30']},
  ];
  const services = [
    {id:'s1', name:'–°—Ç—Ä–∏–∂–∫–∞', price:500, dur:40},
    {id:'s2', name:'–°—Ç—Ä–∏–∂–∫–∞ –±–æ—Ä–æ–¥—ã', price:400, dur:25},
    {id:'s3', name:'–ü–æ–∫—Ä–∞—Å–∫–∞', price:400, dur:45},
    {id:'s4', name:'–û–∫–∞–Ω—Ç–æ–≤–∫–∞', price:200, dur:10},
    {id:'s5', name:'–ú—ã—Ç—å—ë –≥–æ–ª–æ–≤—ã', price:200, dur:10},
    {id:'s6', name:'–£–∫–ª–∞–¥–∫–∞', price:200, dur:15},
    {id:'s7', name:'–í–æ—Å–∫ (–∑–æ–Ω–∞)', price:100, dur:10},
  ];
  const salon = {phone:'+996509951599', address:'–ë–∏—à–∫–µ–∫, —É–ª. –£–º–µ—Ç–∞–ª–∏–µ–≤–∞ 89'};

  /* ---------- –°–û–°–¢–û–Ø–ù–ò–ï ---------- */
  const state = {services:new Set(), master:null, date:null, time:null};
  const screens = ['screen-home','screen-services','screen-masters','screen-calendar','screen-checkout'];
  const backBtn = document.getElementById('backBtn');

  function show(id){
    screens.forEach(s=>document.getElementById(s).hidden = (s!==id));
    backBtn.hidden = (id==='screen-home');
    if(id==='screen-checkout') updateSummary();
    updatePrimaryLabel(id);
    history.pushState({id},'',location.href);
  }
  function goBack(){ history.back(); }
  window.onpopstate = (e)=>{ const id = e.state?.id || 'screen-home'; screens.forEach(s=>document.getElementById(s).hidden=(s!==id)); backBtn.hidden=(id==='screen-home'); updatePrimaryLabel(id); };

  /* ---------- SERVICES RENDER ---------- */
  function renderServices(){
    const box = document.getElementById('svcList'); box.innerHTML='';
    services.forEach(s=>{
      const row = document.createElement('div'); row.className='svc';
      row.innerHTML = `<div><div style="font-weight:700">${s.name}</div><div class="meta">${s.dur} –º–∏–Ω ‚Ä¢ ${s.price} —Å–æ–º</div></div>`;
      const ch = document.createElement('input'); ch.type='checkbox'; ch.className='check';
      ch.checked = state.services.has(s.id);
      ch.onchange = ()=>{ ch.checked ? state.services.add(s.id) : state.services.delete(s.id); };
      row.appendChild(ch); box.appendChild(row);
    });
  }

  /* ---------- MASTERS RENDER ---------- */
  function renderMasters(){
    const box = document.getElementById('mastersList'); box.innerHTML='';
    masters.forEach(m=>{
      const card = document.createElement('div'); card.className='master';
      card.innerHTML = `
        <div class="ava">${m.name[0]}</div>
        <div style="flex:1">
          <div class="mname">${m.name}</div>
          <div class="mmeta">${m.role} ‚Ä¢ ‚òÖ ${m.rating}</div>
          <div class="chips">${m.next.map(t=>`<span class="chip" data-mid="${m.id}" data-t="${t}">${t}</span>`).join('')}</div>
        </div>
        <label class="radio ${state.master===m.id?'act':''}" data-radio="${m.id}"><span></span></label>`;
      box.appendChild(card);
    });
    box.querySelectorAll('[data-radio]').forEach(r=>{
      r.onclick = ()=>{ state.master = r.dataset.radio; state.time=null; renderMasters(); };
    });
    box.querySelectorAll('.chip').forEach(ch=>{
      if(state.master===ch.dataset.mid && state.time===ch.dataset.t) ch.classList.add('sel');
      ch.onclick = ()=>{ state.master = ch.dataset.mid; state.time = ch.dataset.t; renderMasters(); };
    });
  }

  /* ---------- CALENDAR ---------- */
  const calHead = document.getElementById('calHead');
  '–ü–Ω –í—Ç –°—Ä –ß—Ç –ü—Ç –°–± –í—Å'.split(' ').forEach(d=>{ const el=document.createElement('div'); el.className='dow'; el.textContent=d; calHead.appendChild(el); });
  const calGrid = document.getElementById('calGrid');
  const monthLabel = document.getElementById('monthLabel');
  const months = '–Ø–Ω–≤–∞—Ä—å –§–µ–≤—Ä–∞–ª—å –ú–∞—Ä—Ç –ê–ø—Ä–µ–ª—å –ú–∞–π –ò—é–Ω—å –ò—é–ª—å –ê–≤–≥—É—Å—Ç –°–µ–Ω—Ç—è–±—Ä—å –û–∫—Ç—è–±—Ä—å –ù–æ—è–±—Ä—å –î–µ–∫–∞–±—Ä—å'.split(' ');
  let cur = new Date(); cur.setDate(1);

  function renderCal(){
    calGrid.innerHTML='';
    monthLabel.textContent = months[cur.getMonth()] + ' ' + cur.getFullYear();
    const startDay = (cur.getDay()+6)%7;
    const daysInMonth = new Date(cur.getFullYear(), cur.getMonth()+1, 0).getDate();
    for(let i=0;i<startDay;i++){ const d=document.createElement('div'); d.className='d off'; calGrid.appendChild(d); }
    for(let d=1; d<=daysInMonth; d++){
      const el=document.createElement('div'); el.className='d'; el.textContent=d;
      const ds = `${cur.getFullYear()}-${String(cur.getMonth()+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
      if(state.date===ds) el.classList.add('sel');
      el.onclick = ()=>{ state.date=ds; state.time=null; renderCal(); renderDaySlots(); };
      calGrid.appendChild(el);
    }
  }
  function shiftMonth(delta){ cur.setMonth(cur.getMonth()+delta); renderCal(); renderDaySlots(); }
  function renderDaySlots(){
    const box = document.getElementById('daySlots'); box.innerHTML='';
    if(!state.date){ box.innerHTML = '<span class="muted">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É</span>'; return; }
    ['11:00','11:30','12:00','12:30','13:00','15:00','16:30','18:00','18:30','19:00','19:30']
      .forEach(t=>{
        const el=document.createElement('span'); el.className='chip'; el.textContent=t;
        if(state.time===t) el.classList.add('sel');
        el.onclick=()=>{ state.time=t; renderDaySlots(); };
        box.appendChild(el);
      });
  }

  /* ---------- SUMMARY & ACTION ---------- */
  function money(v){ return new Intl.NumberFormat('ru-RU').format(v); }
  function getSummaryText(){
    const chosen = services.filter(s=>state.services.has(s.id));
    const sum = chosen.reduce((a,b)=>a+b.price,0);
    const dur = chosen.reduce((a,b)=>a+b.dur,0);
    const m = masters.find(x=>x.id===state.master)?.name || '–ª—é–±–æ–π';
    return {
      text: `–£—Å–ª—É–≥–∏: ${chosen.map(s=>s.name).join(', ') || '‚Äî'} ‚Ä¢ ${money(sum)} —Å–æ–º ‚Ä¢ ${dur||0} –º–∏–Ω. –ú–∞—Å—Ç–µ—Ä: ${m}. –î–∞—Ç–∞: ${state.date||'‚Äî'} ${state.time||''}`.trim(),
      sum, dur, m
    };
  }
  function updateSummary(){ document.getElementById('summary').innerHTML = getSummaryText().text || '<span class="muted">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥–∏ / –º–∞—Å—Ç–µ—Ä–∞ / –≤—Ä–µ–º—è</span>'; }
  function updatePrimaryLabel(id){
    const btn = document.querySelector('.btn');
    if(id==='screen-checkout') btn.textContent='–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–ø–∏—Å—å';
    else btn.textContent='–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å';
  }
  function primaryAction(){
    const visible = screens.find(id=>!document.getElementById(id).hidden);
    if(visible==='screen-checkout'){
      const name = document.getElementById('name').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const {text} = getSummaryText();
      if(!name || !phone){ alert('–£–∫–∞–∂–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω.'); return; }
      const msg = `–ó–∞—è–≤–∫–∞: ${text}\n–ö–ª–∏–µ–Ω—Ç: ${name}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}`;
      const wa = `https://wa.me/${salon.phone.replace(/[^\\d]/g,'')}?text=${encodeURIComponent(msg)}`;
      // –ø–æ–ø—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å WhatsApp; –µ—Å–ª–∏ –Ω–µ –≤—ã–π–¥–µ—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∂–µ–º –¥–∞–Ω–Ω—ã–µ
      location.href = wa;
      setTimeout(()=>alert('–ï—Å–ª–∏ WhatsApp –Ω–µ –æ—Ç–∫—Ä—ã–ª—Å—è ‚Äî —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:\n\n'+msg),800);
    }else{
      // —à–∞–≥ –∑–∞ —à–∞–≥–æ–º
      if(visible==='screen-home') show('screen-services');
      else if(visible==='screen-services') show('screen-masters');
      else if(visible==='screen-masters') show('screen-calendar');
      else if(visible==='screen-calendar') show('screen-checkout');
    }
  }

  /* ---------- INIT ---------- */
  function init(){
    renderServices();
    renderMasters();
    renderCal();
    renderDaySlots();
    updateSummary();
  }
  init();
</script>
</body>
</html>c
